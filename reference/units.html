<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Handle measurement units — units • units</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Handle measurement units — units"><meta name="description" content='A number of functions are provided for handling unit objects.
`units&amp;lt;-` and units are the basic functions to set
    and retrieve units.
as_units, a generic with methods for a
    character string and for quoted language. Note, direct usage of this function
    by users is typically not necessary, as coercion via as_units is
    automatically done with `units&amp;lt;-` and set_units.
make_units, constructs units from bare expressions.
    make_units(m/s) is equivalent to as_units(quote(m/s)).
set_units, a pipe-friendly version of `units&amp;lt;-`. By
    default it operates with bare expressions, but this
    behavior can be disabled by a specifying mode = "standard" or setting
    units_options(set_units_mode = "standard").
    If value is missing or set to 1, the object becomes unitless.

'><meta property="og:description" content='A number of functions are provided for handling unit objects.
`units&amp;lt;-` and units are the basic functions to set
    and retrieve units.
as_units, a generic with methods for a
    character string and for quoted language. Note, direct usage of this function
    by users is typically not necessary, as coercion via as_units is
    automatically done with `units&amp;lt;-` and set_units.
make_units, constructs units from bare expressions.
    make_units(m/s) is equivalent to as_units(quote(m/s)).
set_units, a pipe-friendly version of `units&amp;lt;-`. By
    default it operates with bare expressions, but this
    behavior can be disabled by a specifying mode = "standard" or setting
    units_options(set_units_mode = "standard").
    If value is missing or set to 1, the object becomes unitless.

'></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">units</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0-0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/units.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/measurement_units_in_R.html">Measurement units in R</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/r-quantities/units/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Handle measurement units</h1>
      <small class="dont-index">Source: <a href="https://github.com/r-quantities/units/blob/v1.0-0/R/conversion.R" class="external-link"><code>R/conversion.R</code></a>, <a href="https://github.com/r-quantities/units/blob/v1.0-0/R/make_units.R" class="external-link"><code>R/make_units.R</code></a></small>
      <div class="d-none name"><code>units.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>A number of functions are provided for handling unit objects.</p><ul><li><p><code>`units&lt;-`</code> and <code>units</code> are the basic functions to set
    and retrieve units.</p></li>
<li><p><code>as_units</code>, a generic with methods for a
    character string and for quoted language. Note, direct usage of this function
    by users is typically not necessary, as coercion via <code>as_units</code> is
    automatically done with <code>`units&lt;-`</code> and <code>set_units</code>.</p></li>
<li><p><code>make_units</code>, constructs units from bare expressions.
    <code>make_units(m/s)</code> is equivalent to <code>as_units(quote(m/s))</code>.</p></li>
<li><p><code>set_units</code>, a pipe-friendly version of <code>`units&lt;-`</code>. By
    default it operates with bare expressions, but this
    behavior can be disabled by a specifying <code>mode = "standard"</code> or setting
    <code>units_options(set_units_mode = "standard")</code>.
    If <code>value</code> is missing or set to <code>1</code>, the object becomes unitless.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S3 method for class 'numeric'</span></span>
<span><span class="fu">units</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">value</span></span>
<span></span>
<span><span class="co"># S3 method for class 'units'</span></span>
<span><span class="fu">units</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">value</span></span>
<span></span>
<span><span class="co"># S3 method for class 'logical'</span></span>
<span><span class="fu">units</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">value</span></span>
<span></span>
<span><span class="co"># S3 method for class 'units'</span></span>
<span><span class="fu">units</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'symbolic_units'</span></span>
<span><span class="fu">units</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">set_units</span><span class="op">(</span><span class="va">x</span>, <span class="va">value</span>, <span class="va">...</span>, mode <span class="op">=</span> <span class="fu"><a href="units_options.html">units_options</a></span><span class="op">(</span><span class="st">"set_units_mode"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">make_units</span><span class="op">(</span><span class="va">bare_expression</span>, check_is_valid <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">as_units</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Default S3 method</span></span>
<span><span class="fu">as_units</span><span class="op">(</span><span class="va">x</span>, value <span class="op">=</span> <span class="va">unitless</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'units'</span></span>
<span><span class="fu">as_units</span><span class="op">(</span><span class="va">x</span>, <span class="va">value</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'symbolic_units'</span></span>
<span><span class="fu">as_units</span><span class="op">(</span><span class="va">x</span>, <span class="va">value</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'difftime'</span></span>
<span><span class="fu">as_units</span><span class="op">(</span><span class="va">x</span>, <span class="va">value</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'character'</span></span>
<span><span class="fu">as_units</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span>, check_is_valid <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  force_single_symbol <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'call'</span></span>
<span><span class="fu">as_units</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'expression'</span></span>
<span><span class="fu">as_units</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'name'</span></span>
<span><span class="fu">as_units</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'POSIXt'</span></span>
<span><span class="fu">as_units</span><span class="op">(</span><span class="va">x</span>, <span class="va">value</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'Date'</span></span>
<span><span class="fu">as_units</span><span class="op">(</span><span class="va">x</span>, <span class="va">value</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>numeric vector, or object of class <code>units</code>.</p></dd>


<dt id="arg-value">value<a class="anchor" aria-label="anchor" href="#arg-value"></a></dt>
<dd><p>object of class <code>units</code> or <code>symbolic_units</code>, or in the
case of <code>set_units</code> expression with symbols (see examples).</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>passed on to other methods.</p></dd>


<dt id="arg-mode">mode<a class="anchor" aria-label="anchor" href="#arg-mode"></a></dt>
<dd><p>if <code>"symbols"</code> (the default), then unit is constructed from
the expression supplied. Otherwise, if<code>mode = "standard"</code>,
standard evaluation is used for the supplied value This argument can be set
via a global option <code>units_options(set_units_mode = "standard")</code></p></dd>


<dt id="arg-bare-expression">bare_expression<a class="anchor" aria-label="anchor" href="#arg-bare-expression"></a></dt>
<dd><p>a bare R expression describing units. Must be valid R
syntax (reserved R syntax words like <code>in</code> must be backticked)</p></dd>


<dt id="arg-check-is-valid">check_is_valid<a class="anchor" aria-label="anchor" href="#arg-check-is-valid"></a></dt>
<dd><p>throw an error if all the unit symbols are not either
recognized by udunits2, or a custom
user defined via <code><a href="install_unit.html">install_unit()</a></code>. If <code>FALSE</code>, no check
for validity is performed.</p></dd>


<dt id="arg-force-single-symbol">force_single_symbol<a class="anchor" aria-label="anchor" href="#arg-force-single-symbol"></a></dt>
<dd><p>Whether to perform no string parsing and force
treatment of the string as a single symbol.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An object of class <code>units</code>.</p>
<p>The <code>units</code> method retrieves the units attribute, which is of
class <code>symbolic_units</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>If <code>value</code> is of class <code>units</code> and has a value unequal to 1, this
value is ignored unless <code>units_options("simplifiy")</code> is <code>TRUE</code>. If
<code>simplify</code> is <code>TRUE</code>, <code>x</code> is multiplied by this value.</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>By default, unit names are automatically substituted with unit names
  (e.g., kilogram –&gt; kg). To turn off this behavior, set
  <code>units_options(auto_convert_names_to_symbols = FALSE)</code></p>
    </div>
    <div class="section level2">
    <h2 id="character-strings">Character strings<a class="anchor" aria-label="anchor" href="#character-strings"></a></h2>



<p>Generally speaking, there are 3 types of unit strings are accepted in
  <code>as_units</code> (and by extension, <code>`units&lt;-`</code>).</p>
<p>The first type, and likely most common, is a "standard" format unit
  specification where the relationship between unit symbols or names is
  specified explicitly with arithmetic symbols for division <code>/</code>,
  multiplication <code>*</code> and power exponents <code>^</code>.</p>
<p>The second type of unit string accepted is one with implicit exponents. In
  this format, <code>/</code>, <code>*</code>, and <code>^</code>, may not be present in the
  string, and unit symbol or names must be separated by a space. Each unit
  symbol may optionally be followed by a single number, specifying the power.
  For example <code>"m2 s-2"</code> is equivalent to <code>"(m^2)*(s^-2)"</code>.</p>
<p>If the string supplied fails to parse, then the string is treated as a
  single symbolic unit and <code>symbolic_unit(chr)</code> is used as a fallback
  with a warning. In that case, automatic unit simplification may not work
  properly when performing operations on unit objects, but unit conversion
  and other Math operations should still give correct results so long as
  the unit string supplied returns <code>TRUE</code> for <code>ud_is_parsable()</code>.</p>
<p>It must be noted that prepended numbers are supported too, but are not
  treated as magnitudes. For example, <code>"1000 m"</code> is interpreted as
  a prefixed unit, and it is equivalent to <code>"km"</code> to all effects.</p>
<p>The third type of unit string format accepted is the special case of
  udunits time duration with a reference origin, for example <code>"hours
  since 1970-01-01 00:00:00"</code>. Note, that the handling of time and calendar
  operations via the udunits library is subtly different from the way R
  handles date and time operations. This functionality is mostly exported for
  users that work with udunits time data, e.g., with NetCDF files. Users are
  otherwise encouraged to use <code>R</code>'s date and time functionality provided
  by <code>Date</code> and <code>POSIXt</code> classes.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="install_unit.html">install_unit</a></code>, <code><a href="valid_udunits.html">valid_udunits</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">x</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "integer"</span>
<span class="r-in"><span><span class="fu">units</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu">as_units</span><span class="op">(</span><span class="st">"m/s"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "units"</span>
<span class="r-in"><span><span class="va">y</span> <span class="op">=</span> <span class="fl">2</span><span class="op">:</span><span class="fl">5</span></span></span>
<span class="r-in"><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu">set_units</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, <span class="va">m</span><span class="op">/</span><span class="va">s</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">units</span><span class="op">(</span><span class="va">a</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu">make_units</span><span class="op">(</span><span class="va">km</span><span class="op">/</span><span class="va">h</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">a</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Units: [km*h^-1]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1]  3.6  7.2 10.8</span>
<span class="r-in"><span><span class="co"># convert to a mixed_units object:</span></span></span>
<span class="r-in"><span><span class="fu">units</span><span class="op">(</span><span class="va">a</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"m/s"</span>, <span class="st">"km/h"</span>, <span class="st">"km/h"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">a</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mixed units: m*s^-1 (1), km*h^-1 (2) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 [m*s^-1], 7.2 [km*h^-1], 10.8 [km*h^-1] </span>
<span class="r-in"><span><span class="co"># The easiest way to assign units to a numeric vector is like this:</span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">y</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span></span></span>
<span class="r-in"><span><span class="fu">units</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"m/s"</span>  <span class="co"># meters / second</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Alternatively, the easiest pipe-friendly way to set units:</span></span></span>
<span class="r-in"><span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"magrittr"</span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org" class="external-link">magrittr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">y</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">set_units</span><span class="op">(</span><span class="va">m</span><span class="op">/</span><span class="va">s</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Units: [m*s^-1]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1 2 3 4</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># these are different ways of creating the same unit:</span></span></span>
<span class="r-in"><span><span class="co"># meters per second squared, i.e, acceleration</span></span></span>
<span class="r-in"><span><span class="va">x1</span> <span class="op">&lt;-</span> <span class="fu">make_units</span><span class="op">(</span><span class="va">m</span><span class="op">/</span><span class="va">s</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">x2</span> <span class="op">&lt;-</span> <span class="fu">as_units</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">quote</a></span><span class="op">(</span><span class="va">m</span><span class="op">/</span><span class="va">s</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">x2</span> <span class="op">&lt;-</span> <span class="fu">as_units</span><span class="op">(</span><span class="st">"m/s^2"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">x3</span> <span class="op">&lt;-</span> <span class="fu">as_units</span><span class="op">(</span><span class="st">"m s-2"</span><span class="op">)</span> <span class="co"># in product power form, i.e., implicit exponents = T</span></span></span>
<span class="r-in"><span><span class="va">x4</span> <span class="op">&lt;-</span> <span class="fu">set_units</span><span class="op">(</span><span class="fl">1</span>,  <span class="va">m</span><span class="op">/</span><span class="va">s</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span> <span class="co"># by default, mode = "symbols"</span></span></span>
<span class="r-in"><span><span class="va">x5</span> <span class="op">&lt;-</span> <span class="fu">set_units</span><span class="op">(</span><span class="fl">1</span>, <span class="st">"m/s^2"</span>,   mode <span class="op">=</span> <span class="st">"standard"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">x6</span> <span class="op">&lt;-</span> <span class="fu">set_units</span><span class="op">(</span><span class="fl">1</span>, <span class="va">x1</span>,        mode <span class="op">=</span> <span class="st">"standard"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">x7</span> <span class="op">&lt;-</span> <span class="fu">set_units</span><span class="op">(</span><span class="fl">1</span>, <span class="fu">units</span><span class="op">(</span><span class="va">x1</span><span class="op">)</span>, mode <span class="op">=</span> <span class="st">"standard"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">x8</span> <span class="op">&lt;-</span> <span class="fu">as_units</span><span class="op">(</span><span class="st">"m"</span><span class="op">)</span> <span class="op">/</span> <span class="fu">as_units</span><span class="op">(</span><span class="st">"s"</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">all_identical</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">...</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="va">l</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="va">l</span><span class="op">)</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="kw">if</span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="va">l</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, <span class="va">l</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>      <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span><span class="fu">all_identical</span><span class="op">(</span><span class="va">x1</span>, <span class="va">x2</span>, <span class="va">x3</span>, <span class="va">x4</span>, <span class="va">x5</span>, <span class="va">x6</span>, <span class="va">x7</span>, <span class="va">x8</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Note, direct usage of these unit creation functions is typically not</span></span></span>
<span class="r-in"><span><span class="co"># necessary, since coercion is automatically done via as_units(). Again,</span></span></span>
<span class="r-in"><span><span class="co"># these are all equivalent ways to generate the same result.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">x1</span> <span class="op">&lt;-</span> <span class="va">x2</span> <span class="op">&lt;-</span> <span class="va">x3</span> <span class="op">&lt;-</span> <span class="va">x4</span> <span class="op">&lt;-</span> <span class="va">x5</span> <span class="op">&lt;-</span> <span class="va">x6</span> <span class="op">&lt;-</span> <span class="va">x7</span> <span class="op">&lt;-</span> <span class="va">x8</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span></span></span>
<span class="r-in"><span><span class="fu">units</span><span class="op">(</span><span class="va">x1</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"m/s^2"</span></span></span>
<span class="r-in"><span><span class="fu">units</span><span class="op">(</span><span class="va">x2</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"m s-2"</span></span></span>
<span class="r-in"><span><span class="fu">units</span><span class="op">(</span><span class="va">x3</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">quote</a></span><span class="op">(</span><span class="va">m</span><span class="op">/</span><span class="va">s</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">units</span><span class="op">(</span><span class="va">x4</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu">make_units</span><span class="op">(</span><span class="va">m</span><span class="op">/</span><span class="va">s</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">units</span><span class="op">(</span><span class="va">x5</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu">as_units</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">quote</a></span><span class="op">(</span><span class="va">m</span><span class="op">/</span><span class="va">s</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">x6</span> <span class="op">&lt;-</span> <span class="fu">set_units</span><span class="op">(</span><span class="va">x6</span>, <span class="va">m</span><span class="op">/</span><span class="va">s</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">x7</span> <span class="op">&lt;-</span> <span class="fu">set_units</span><span class="op">(</span><span class="va">x7</span>, <span class="st">"m/s^2"</span>, mode <span class="op">=</span> <span class="st">"standard"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">x8</span> <span class="op">&lt;-</span> <span class="fu">set_units</span><span class="op">(</span><span class="va">x8</span>, <span class="fu">units</span><span class="op">(</span><span class="va">x1</span><span class="op">)</span>, mode <span class="op">=</span> <span class="st">"standard"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">all_identical</span><span class="op">(</span><span class="va">x1</span>, <span class="va">x2</span>, <span class="va">x3</span>, <span class="va">x4</span>, <span class="va">x5</span>, <span class="va">x6</span>, <span class="va">x7</span>, <span class="va">x8</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Both unit names or symbols can be used. By default, unit names are</span></span></span>
<span class="r-in"><span><span class="co"># automatically converted to unit symbols.</span></span></span>
<span class="r-in"><span><span class="fu">make_units</span><span class="op">(</span><span class="va">degree_C</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 [°C]</span>
<span class="r-in"><span><span class="fu">make_units</span><span class="op">(</span><span class="va">kilogram</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 [kg]</span>
<span class="r-in"><span><span class="fu">make_units</span><span class="op">(</span><span class="va">ohm</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 [Ω]</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Arithmetic operations and units</span></span></span>
<span class="r-in"><span><span class="co"># conversion between unit objects that were defined as symbols and names will</span></span></span>
<span class="r-in"><span><span class="co"># work correctly, although unit simplification in printing may not always occur.</span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">500</span> <span class="op">*</span> <span class="fu">make_units</span><span class="op">(</span><span class="va">micrograms</span><span class="op">/</span><span class="va">liter</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu">set_units</span><span class="op">(</span><span class="fl">200</span>, <span class="va">ug</span><span class="op">/</span><span class="va">l</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">+</span> <span class="va">y</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 700 [micrograms*L^-1]</span>
<span class="r-in"><span><span class="va">x</span> <span class="op">*</span> <span class="va">y</span> <span class="co"># numeric result is correct, but units not simplified completely</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1e+05 [micrograms*ug*L^-2]</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># note, plural form of unit name accepted too ('liters' vs 'liter'), and</span></span></span>
<span class="r-in"><span><span class="co"># denominator simplification can be performed correctly</span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">*</span> <span class="fu">set_units</span><span class="op">(</span><span class="fl">5</span>, <span class="va">liters</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2500 [micrograms]</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># unit conversion works too</span></span></span>
<span class="r-in"><span><span class="fu">set_units</span><span class="op">(</span><span class="va">x</span>, <span class="va">grams</span><span class="op">/</span><span class="va">gallon</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.001892706 [g*gallon^-1]</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Creating custom, user defined units</span></span></span>
<span class="r-in"><span><span class="co"># For example, a microbiologist might work with counts of bacterial cells</span></span></span>
<span class="r-in"><span><span class="co"># make_units(cells/ml) # by default, throws an ERROR</span></span></span>
<span class="r-in"><span><span class="co"># First define the unit, then the newly defined unit is accepted.</span></span></span>
<span class="r-in"><span><span class="fu"><a href="install_unit.html">install_unit</a></span><span class="op">(</span><span class="st">"cells"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">make_units</span><span class="op">(</span><span class="va">cells</span><span class="op">/</span><span class="va">ml</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 [cells*ml^-1]</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Note that install_unit() adds support for defining relationships between</span></span></span>
<span class="r-in"><span><span class="co"># the newly created symbols or names and existing units.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## set_units()</span></span></span>
<span class="r-in"><span><span class="co"># set_units is a pipe friendly version of `units&lt;-`.</span></span></span>
<span class="r-in"><span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"magrittr"</span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org" class="external-link">magrittr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fl">1</span><span class="op">:</span><span class="fl">5</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">set_units</span><span class="op">(</span><span class="va">N</span><span class="op">/</span><span class="va">m</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="co"># first sets to m, then converts to km</span></span></span>
<span class="r-in"><span>  <span class="fl">1</span><span class="op">:</span><span class="fl">5</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">set_units</span><span class="op">(</span><span class="va">m</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">set_units</span><span class="op">(</span><span class="va">km</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Units: [km]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.001 0.002 0.003 0.004 0.005</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># set_units has two modes of operation. By default, it operates with</span></span></span>
<span class="r-in"><span><span class="co"># bare symbols to define the units.</span></span></span>
<span class="r-in"><span><span class="fu">set_units</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="va">m</span><span class="op">/</span><span class="va">s</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Units: [m*s^-1]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1 2 3 4 5</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># use `mode = "standard"` to use the value of supplied argument, rather than</span></span></span>
<span class="r-in"><span><span class="co"># the bare symbols of the expression. In this mode, set_units() can be</span></span></span>
<span class="r-in"><span><span class="co"># thought of as a simple alias for `units&lt;-` that is pipe friendly.</span></span></span>
<span class="r-in"><span><span class="fu">set_units</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="st">"m/s"</span>, mode <span class="op">=</span> <span class="st">"standard"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Units: [m*s^-1]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1 2 3 4 5</span>
<span class="r-in"><span><span class="fu">set_units</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="fu">make_units</span><span class="op">(</span><span class="va">m</span><span class="op">/</span><span class="va">s</span><span class="op">)</span>, mode <span class="op">=</span> <span class="st">"standard"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Units: [m*s^-1]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1 2 3 4 5</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># the mode of set_units() can be controlled via a global option</span></span></span>
<span class="r-in"><span><span class="co"># units_options(set_units_mode = "standard")</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># To remove units use</span></span></span>
<span class="r-in"><span><span class="fu">units</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span></span>
<span class="r-in"><span><span class="co"># or</span></span></span>
<span class="r-in"><span><span class="fu">set_units</span><span class="op">(</span><span class="va">x</span>, <span class="cn">NULL</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 500</span>
<span class="r-in"><span><span class="co"># or</span></span></span>
<span class="r-in"><span><span class="fu"><a href="drop_units.html">drop_units</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 200</span>
<span class="r-in"><span><span class="va">s</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">d</span>  <span class="op">=</span> <span class="va">s</span> <span class="op">-</span> <span class="op">(</span><span class="va">s</span><span class="op">+</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">as_units</span><span class="op">(</span><span class="va">d</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> -1 [s]</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Edzer Pebesma, Thomas Mailund, Tomasz Kalinowski, Iñaki Ucar.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

